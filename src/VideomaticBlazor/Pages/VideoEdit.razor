@page "/VideoEdit/{VideoId:long}"
@using Company.Videomatic.Application.Features.Videos;
@inject ISender Sender;

<VideoCard Video=@Video />

@code {
    [Parameter]
    public VideoDTO Video { get; set; } = new(1, "Nowhere", "No Title", "No Description");

    [Parameter]
    public long VideoId { get; set; } = 0;

    protected override async Task OnParametersSetAsync()
    {
        var query = new GetVideosByIdQuery(
            VideoIds: new[] { VideoId },
            Resolution: ThumbnailResolutionDTO.Default
        );        
        
        var result = await Sender.Send(query);
        
        Video = result.Single();        
    }
}

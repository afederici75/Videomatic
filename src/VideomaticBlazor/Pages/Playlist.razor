@page "/Playlist/{PlaylistId:long}"
@inject ISender Sender;

<CardDeck>
@foreach (var video in Videos)
{
    <VideoCard Video=video />
}   
</CardDeck>

@code {
    // ShouldRender: https://learn.microsoft.com/en-us/aspnet/core/blazor/call-web-api?view=aspnetcore-7.0&pivots=server

    VideoDTO[] Videos = Array.Empty<VideoDTO>();    

    [Parameter]
    public long PlaylistId { get; set; } = 0;
    List<string> EventType = new List<string>();

    protected override async Task OnParametersSetAsync()
    {
        var query = new GetVideosByPlaylistQuery(
            PlaylistId: PlaylistId, 
            IncludeCounts: true, 
            IncludeThumbnail: ThumbnailResolution.Default);

        GetVideosByPlaylistResponse resp = await Sender.Send(query);

        Videos = resp.Items.ToArray();        
    }    
}